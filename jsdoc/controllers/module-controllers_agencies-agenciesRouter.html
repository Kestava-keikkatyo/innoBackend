<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Namespace: agenciesRouter</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Namespace: agenciesRouter</h1>

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="module-controllers_agencies.html">controllers/agencies</a>~</span>agenciesRouter</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Express router to mount Agency-related functions on.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agencies.js.html">agencies.js</a>, <a href="agencies.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~addBusinessContractToParticipants"><span class="type-signature">(inner) </span>addBusinessContractToParticipants<span class="signature">(contract, callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    After a BusinessContract is made, a reference to it needs to be added to both of its participants.A BusinessContract is always between a) Agency and Worker or b) Agency and Business.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>contract</code></td>
            

            <td class="type">
            
                
<span class="param-type">BusinessContract</span>


            
            </td>

            

            

            <td class="description last">The created BusinessContract to be added to participants.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">A function(error, result) which will handle the outcome of this function.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line349">line 349</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~createBusinessContract"><span class="type-signature">(inner) </span>createBusinessContract<span class="signature">(participants)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Helper function to avoid duplicate code. Function creates the businessContract and saves it to database.Note: ONLY workerId OR businessId should be present in participants. Otherwise will return an error.Returns {Object|Error} Error if saving the contract was not successful or both workerId and businessId were given in parameter. A BusinessContract object if saving to database was successful.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>participants</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">{ agencyId, businessId || workerId }
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>agencyId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Agency to be saved to the BusinessContract</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>businessId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Business to be saved to the BusinessContract</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>workerId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Worker to be saved to the BusinessContract</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line316">line 316</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~DELETE/businesscontracts/:businessContractId"><span class="type-signature">(inner) </span>DELETE /businesscontracts/:businessContractId<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns response.body: { The updated BusinessContract object }, response.header.Location: The updated businesscontract url api/businesscontracts/:businessContractIdRequires user logged in as an Agency taking part in this specific BusinessContract.Route for an Agency to delete an existing BusinessContract and remove its references from its participantsbusinessContractId is read from url param and the matching BusinessContract is put to request.businessContract by businessContractExists-middlewareThe logged in Agency object is in request.agency by needsToBeAgency-middleware
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line266">line 266</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~GET/agencies/businesscontracts"><span class="type-signature">(inner) </span>GET /agencies/businesscontracts<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns response.body: { [{businessContract1}, {businessContract2},...] }Requires user logged in as Agency.Route for getting full data of all BusinessContracts that the logged in Agency has.{ [{businessContract1}, {businessContract2},...] }
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agencies.js.html">agencies.js</a>, <a href="agencies.js.html#line255">line 255</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~GET/businesscontracts/:businessContractId"><span class="type-signature">(inner) </span>GET /businesscontracts/:businessContractId<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns response.body: { businessContract: TheWholeBusinessContractObject }Requires user logged in as a participant of this specific BusinessContract. body requirements: body.role = "agency" / "business" / "worker"Route for getting one specific businessContract
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~get/me"><span class="type-signature">(inner) </span>get/me<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agencies.js.html">agencies.js</a>, <a href="agencies.js.html#line72">line 72</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~POST/agencies"><span class="type-signature">(inner) </span>POST /agencies<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns a token that is used for user log in.Request requirements:Body.email, Body.name, Body.password
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agencies.js.html">agencies.js</a>, <a href="agencies.js.html#line29">line 29</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~POST/businesscontracts"><span class="type-signature">(inner) </span>POST /businesscontracts<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns response.body: { The created businessContract object }, response.header.Location: created businesscontract url api/businesscontracts/:businessContractIdRequires User logged in as an Agency. body requirements: {businessId: "businessId" OR workerId: "workerId"}Route for initiating a connection between Agency and Business or Worker.The BusinessContract is created and the url to the contract resource is returned so that it can be sent to the Business or Worker.agencyId from jwt-token
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line86">line 86</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~PUT/businesscontracts/:businessContractId"><span class="type-signature">(inner) </span>PUT /businesscontracts/:businessContractId<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns response.body: { The updated BusinessContract object }, response.header.Location: The updated businesscontract url api/businesscontracts/:businessContractIdRequires user logged in as a Business/Worker taking part in this specific BusinessContract.Route for a Business/Worker to accept a BusinessContract created by an AgencybusinessContractId is read from url param and the matching BusinessContract is put to request.businessContract by businessContractExists-middleware
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="businesscontracts.js.html">businesscontracts.js</a>, <a href="businesscontracts.js.html#line204">line 204</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-controllers_agencies.html">controllers/agencies</a></li><li><a href="module-controllers_businesses.html">controllers/businesses</a></li><li><a href="module-controllers_users.html">controllers/users</a></li><li><a href="module-controllers_workcontracts.html">controllers/workcontracts</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-controllers_agencies-agenciesRouter.html">agenciesRouter</a></li><li><a href="module-controllers_businesses-businessesRouter.html">businessesRouter</a></li><li><a href="module-controllers_users-usersRouter.html">usersRouter</a></li><li><a href="module-controllers_workcontracts-workcontractsRouter.html">workcontractsRouter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Mon Jan 25 2021 08:56:49 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>